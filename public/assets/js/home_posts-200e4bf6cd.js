{let e=function(){let e=$("#new-post-form");e.submit((function(s){s.preventDefault(),$.ajax({type:"POST",url:"/posts/create",data:e.serialize(),success:function(e){let s=t(e.data.post);$("#posts-list-container>ul").prepend(s),n($(".delete-post-button",s)),o($(".new-comment-form",s),s),new ToggleLike($(".toggle-like-button",s)),new Noty({theme:"relax",text:"Post Created via AJAX",type:"success",layout:"topRight",timeout:1500}).show()},error:function(e){console.log(e.responseText)}})}))},t=function(e){return $(`<li id="post-${e._id}">\n        <p>\n           <small>\n                <a class="delete-post-button" href="/posts/destroy/${e._id}">\n                X\n                 </a>\n            </small>\n            ${e.content}\n            <br>\n            <small>\n            ${e.user.name}\n            </small>\n            <br>\n            <small>\n              <a class="toggle-like-button" data-likes="0"  href="/likes/toggle/?id=${e._id}&type=Post">\n                0 Likes\n               </a>\n            <small>\n        </p>\n        <div class="post-comments">\n           \n                <form action="/comments/create" class="new-comment-form" method="POST">\n                    <input type="text" name="content" placeholder="Type Here to add comment..." required>\n                    <input type="hidden" name="post" value="${e._id}" >\n                    <input type="submit" value="Add Comment">\n                </form>\n    \n            \n    \n            <div class="post-comments-list">\n                <ul id="post-comments-${e._id}">\n                   \n                </ul>\n            </div>\n        </div>\n        \n    </li>\n        `)},n=function(e){$(e).click((function(t){t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){$("#post-"+e.data.post_id).remove(),new Noty({theme:"relax",text:"Post Deleted via AJAX",type:"success",layout:"topRight",timeout:1500}).show()},error:function(e){console.log(e.responseText)}})}))},o=function(e,t){$(e).submit((function(n){n.preventDefault(),$.ajax({type:"POST",url:"/comments/create",data:$(e).serialize(),success:function(e){let n=s(e.data.comment);$(".post-comments-list>ul",t).prepend(n),l($(".delete-comment-button",n)),new ToggleLike($(".toggle-like-button",n)),new Noty({theme:"relax",text:"Comment Created via AJAX",type:"success",layout:"topRight",timeout:1500}).show()},error:function(e){console.log(e.responseText)}})}))},s=function(e){return $(`<li id="comment-${e._id}">  \n       <p>\n           <small>\n                       <a class="delete-comment-button" href="/comments/destroy/${e._id}">\n                            X\n                        </a>\n            </small>\n           ${e.content}\n           <br>\n           <small>\n               ${e.user.name}\n           </small>\n           <small>\n              <a class="toggle-like-button" data-likes="0"  href="/likes/toggle/?id=${e._id}&type=Comment">\n                0 Likes\n               </a>\n            <small>\n       </p>\n   </li>     \n        `)},l=function(e){$(e).click((function(t){t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){$("#comment-"+e.data.comment_id).remove(),new Noty({theme:"relax",text:"Comment Deleted via AJAX",type:"success",layout:"topRight",timeout:1500}).show()},error:function(e){console.log(e.responseText)}})}))};var allposts=$(".delete-post-button");for(i=0;i<allposts.length;i++)n(allposts[i]);var allcomments=$(".new-comment-form"),allpostsbox=$(".post-comments");for(j=0;j<allcomments.length;j++)o(allcomments[j],allpostsbox[j]);var allcommentstobedeleted=$(".delete-comment-button");for(k=0;k<allcommentstobedeleted.length;k++)l(allcommentstobedeleted[k]);e()}